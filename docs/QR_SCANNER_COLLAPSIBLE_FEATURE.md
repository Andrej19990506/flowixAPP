# Сворачиваемый QR-сканер

## Описание
Теперь QR-сканер не закрывается полностью после каждого сканирования! Вместо этого камера сворачивается в маленькое окошко, позволяя продолжать работу в интерфейсе Инвентаризации.

## Как это работает

### 1. Открытие сканера
- Нажмите кнопку QR-сканера в интерфейсе Инвентаризации
- Камера открывается на полный экран

### 2. Сканирование
- Наведите камеру на QR-код или штрихкод
- После успешного сканирования:
  - Вы услышите вибрацию и звуковой сигнал
  - Появится баннер с отсканированным кодом
  - Камера автоматически свернется в правый нижний угол

### 3. Работа со свернутой камерой
- **Свернутая камера** - маленькое окно в правом нижнем углу
- Вы можете взаимодействовать с интерфейсом Инвентаризации под камерой
- Камера **продолжает работать** в фоновом режиме
- Кнопка **"Развернуть"** (оранжевая с стрелкой вверх) - разворачивает камеру обратно

### 4. Повторное сканирование
- Нажмите кнопку "Развернуть" на свернутой камере
- Камера вернется на полный экран
- Сканируйте следующий товар

### 5. Закрытие сканера
- Нажмите кнопку "Назад" (стрелка влево) чтобы полностью закрыть сканер
- Или просто продолжайте работу с камерой в свернутом виде

## Преимущества

✅ **Нет постоянного открытия/закрытия** - камера остается открытой  
✅ **Быстрая работа** - сканируйте несколько товаров подряд без задержек  
✅ **Удобный workflow** - работайте с интерфейсом между сканированиями  
✅ **Экономия времени** - не нужно каждый раз ждать инициализации камеры

## Технические детали

### Android Native
- Используется `ObjectAnimator` для плавной анимации сворачивания
- Камера уменьшается до 25% размера и перемещается в правый нижний угол
- `FLAG_NOT_TOUCH_MODAL` позволяет кликам проходить через свернутую камеру
- События отправляются в React Native через `DeviceEventManagerModule`

### React Native Integration
- События `onQrCodeScanned` отправляются при каждом успешном сканировании
- Activity остается открытой, пока пользователь не закроет её вручную
- Поддержка обнаружения дубликатов (isDuplicate флаг)

## Использование в коде

```typescript
// Слушаем события сканирования
useEffect(() => {
  const eventEmitter = new NativeEventEmitter(NativeModules.QrScannerNativeModule);
  
  const subscription = eventEmitter.addListener('onQrCodeScanned', (event) => {
    const { code, isDuplicate } = event;
    
    if (isDuplicate) {
      console.log('Дубликат:', code);
    } else {
      console.log('Новый код:', code);
      // Обработка нового кода
    }
  });
  
  return () => subscription.remove();
}, []);
```

## Будущие улучшения

- [ ] Возможность изменения размера свернутой камеры
- [ ] Возможность перетаскивания свернутой камеры в разные углы
- [ ] Настройка положения свернутой камеры (левый/правый угол)
- [ ] Автоматическое сворачивание через N секунд без активности

